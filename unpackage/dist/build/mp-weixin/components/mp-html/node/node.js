(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/mp-html/node/node"],{"23bc":function(t,i,s){},b337:function(t,i,s){"use strict";var e;s.d(i,"b",(function(){return o})),s.d(i,"c",(function(){return r})),s.d(i,"a",(function(){return e}));var o=function(){var t=this,i=t.$createElement;t._self._c},r=[]},bb78:function(t,i,s){"use strict";var e=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])};i["a"]=e},c098:function(t,i,s){"use strict";(function(t){function e(t){var i;return i=t.detail.y,i-t.currentTarget.offsetTop<150&&(i=t.currentTarget.offsetTop),i<30&&(i+=70),i-30}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=function(){Promise.resolve().then(function(){return resolve(s("e2c6"))}.bind(null,s)).catch(s.oe)},r={name:"node",options:{virtualHost:!0},data:function(){return{ctrl:{}}},props:{name:String,attrs:{type:Object,default:function(){return{}}},childs:Array,opts:Array},components:{node:o},mounted:function(){var t=this;this.$nextTick((function(){for(t.root=t.$parent;"mp-html"!==t.root.$options.name;t.root=t.root.$parent);}))},beforeDestroy:function(){this.root._edit===this&&(this.root._edit=void 0)},methods:{editStart:function(t){var i=this;if(this.opts[4]){var s=t.currentTarget.dataset.i;this.ctrl["e"+s]?(this.root._mask.pop(),this.root._maskTap(),this.$set(this.ctrl,"e"+s,2),setTimeout((function(){i.$set(i.ctrl,"e"+s,3)}),50)):(this.$set(this.ctrl,"e"+s,1),setTimeout((function(){i.root._mask.push((function(){return i.$set(i.ctrl,"e"+s,0)}))}),50),this.root._edit=this,this.i=s,this.cursor=this.childs[s].text.length)}},editInput:function(t){var i=t.target.dataset.i,s=t.detail.value.replace(/ {2,}/,(function(t){for(var i=" ",s=1;s<t.length;s++)i+=" ";return i}));this.root._editVal("".concat(this.opts[6],".").concat(i,".text"),this.childs[i].text,s),this.cursor=t.detail.cursor},editEnd:function(t){var i=t.target.dataset.i;this.$set(this.ctrl,"e"+i,0),this.root._setData("".concat(this.opts[6],".").concat(i,".text"),t.detail.value)},insert:function(t){var i=this;setTimeout((function(){var s=i.childs.slice(0);if(s[i.i])if(s[i.i].text){var e=s[i.i].text,o=[];i.cursor&&o.push({type:"text",text:e.substring(0,i.cursor)}),o.push(t),i.cursor<e.length&&o.push({type:"text",text:e.substring(i.cursor)}),s.splice.apply(s,[i.i,1].concat(o))}else s.splice(parseInt(i.i)+1,0,t);else s.push(t);i.root._editVal(i.opts[6],i.childs,s,!0)}),200)},remove:function(t){var i=this.childs.slice(0);i.splice(t,1),this.root._edit=void 0,this.root._maskTap(),this.root._editVal(this.opts[6],this.childs,i,!0)},nodeTap:function(t){var i=this;if(this.opts[4]){if(this.root._lock)return;if(this.root._lock=!0,setTimeout((function(){i.root._lock=!1}),50),3===this.ctrl["e"+this.i])return;this.root._maskTap(),this.root._edit=this;var s=this.opts[6].lastIndexOf("children.");-1!==s?s+=9:s=6;var o=parseInt(this.opts[6].substring(s,this.opts[6].lastIndexOf(".children"))),r=this.$parent;while(r&&"node"!==r.$options.name)r=r.$parent;if(!r||this.opts[6].length-r.opts[6].length>15)return;this.$set(this.ctrl,"root",1),this.root._mask.push((function(){return i.$set(i.ctrl,"root",0)})),1!==this.childs.length||"text"!==this.childs[0].type||this.ctrl.e0||(this.$set(this.ctrl,"e0",1),this.root._mask.push((function(){return i.$set(i.ctrl,"e0",0)})),this.i=0,this.cursor=this.childs[0].text.length);var n=this.root._getItem(r.childs[o]);this.root._tooltip({top:e(t),items:n,success:function(s){if("大小"===n[s]){var a=r.childs[o].attrs.style||"",c=a.match(/;font-size:([0-9]+)px/);c=c?parseInt(c[1]):16,i.root._slider({min:10,max:30,value:c,top:e(t),changing:function(i){Math.abs(i-c)>2&&(r.changeStyle("font-size",o,i+"px",c+"px"),c=t.detail.value)},change:function(t){t!==c&&r.changeStyle("font-size",o,t+"px",c+"px"),i.root._editVal("".concat(r.opts[6],".").concat(o,".attrs.style"),a,r.childs[o].attrs.style)}})}else if("删除"===n[s])r.remove(o);else{var h,l,u=r.childs[o].attrs.style||"",f="",d=n[s];"斜体"===d?(h="font-style",l="italic"):"粗体"===d?(h="font-weight",l="bold"):"下划线"===d?(h="text-decoration",l="underline"):"居中"===d?(h="text-align",l="center"):"缩进"===d&&(h="text-indent",l="2em"),f=u.includes(h+":")?u.replace(new RegExp(h+":[^;]+"),""):u+";"+h+":"+l,i.root._editVal("".concat(r.opts[6],".").concat(o,".attrs.style"),u,f,!0)}}})}},mediaTap:function(i){var s=this;if(this.opts[4]){var e=i.target.dataset.i,o=this.childs[e],r=this.root._getItem(o);this.root._edit=this,this.i=e,this.root._tooltip({top:i.target.offsetTop-30,items:r,success:function(i){"封面"===r[i]?s.root.getSrc("img",o.attrs.poster).then((function(t){s.root._editVal("".concat(s.opts[6],".").concat(e,".attrs.poster"),o.attrs.poster,t,!0)})).catch((function(){})):"删除"===r[i]?s.remove(e):(s.root._setData("".concat(s.opts[6],".").concat(e,".attrs.loop"),!o.attrs.loop),t.showToast({title:"成功"}))}}),this.root._lock=!0,setTimeout((function(){s.root._lock=!1}),50)}},changeStyle:function(t,i,s,e){var o=this.childs[i].attrs.style||"";o.includes(";"+t+":"+e)?o=o.replace(";"+t+":"+e,";"+t+":"+s):o+=";"+t+":"+s,this.root._setData("".concat(this.opts[6],".").concat(i,".attrs.style"),o)},toJSON:function(){},play:function(i){if(this.root.pauseVideo){for(var s=!1,e=i.target.id,o=this.root._videos.length;o--;)this.root._videos[o].id===e?s=!0:this.root._videos[o].pause();if(!s){var r=t.createVideoContext(e,this);r.id=e,this.root._videos.push(r)}}},imgTap:function(i){var s=this;if(this.opts[4]){var o=i.currentTarget.dataset.i,r=this.childs[o],n=this.root._getItem(r);this.root._edit=this,this.i=o,this.root._maskTap(),this.$set(this.ctrl,"e"+o,1),this.root._mask.push((function(){return s.$set(s.ctrl,"e"+o,0)})),this.root._tooltip({top:e(i),items:n,success:function(a){if("换图"===n[a])s.root.getSrc("img",r.attrs.src).then((function(t){s.root._editVal(s.opts[6]+"."+o+".attrs.src",r.attrs.src,t,!0)})).catch((function(){}));else if("宽度"===n[a]){var c=r.attrs.style||"",h=c.match(/max-width:([0-9]+)%/);h=h?parseInt(h[1]):100,s.root._slider({min:0,max:100,value:h,top:e(i),changing:function(t){Math.abs(t-h)>5&&(s.changeStyle("max-width",o,t+"%",h+"%"),h=t)},change:function(t){t!==h&&(s.changeStyle("max-width",o,t+"%",h+"%"),h=t),s.root._editVal(s.opts[6]+"."+o+".attrs.style",c,s.childs[o].attrs.style)}})}else"超链接"===n[a]?s.root.getSrc("link",r.a?r.a.href:"").then((function(t){if(r.a)s.root._editVal(s.opts[6]+"."+o+".a.href",r.a.href,t,!0);else{var i={name:"a",attrs:{href:t},children:[r]};r.a=i.attrs,s.root._editVal(s.opts[6]+"."+o,r,i,!0)}wx.showToast({title:"成功"})})).catch((function(){})):"预览图"===n[a]?s.root.getSrc("img",r.attrs["original-src"]).then((function(i){s.root._editVal(s.opts[6]+"."+o+".attrs.original-src",r.attrs["original-src"],i,!0),t.showToast({title:"成功"})})).catch((function(){})):"删除"===n[a]?s.remove(o):(s.root._setData(s.opts[6]+"."+o+".attrs.ignore",!r.attrs.ignore),t.showToast({title:"成功"}))}}),this.root._lock=!0,setTimeout((function(){s.root._lock=!1}),50)}else{var a=this.childs[i.currentTarget.dataset.i];if(a.a)return void this.linkTap(a.a);if(a.attrs.ignore)return;this.root.$emit("imgtap",a.attrs),this.root.previewImg&&t.previewImage({current:parseInt(a.attrs.i),urls:this.root.imgList})}},imgLongTap:function(t){},imgLoad:function(i){var s=this;this.opts[4]&&this.$nextTick((function(){var i=s.childs[e].attrs.id||"n"+e;t.createSelectorQuery().in(s).select("#"+i).boundingClientRect().exec((function(t){s.$set(s.ctrl,"h"+e,t[0].height)}))}));var e=i.currentTarget.dataset.i;if(this.childs[e].w)(this.opts[1]&&!this.ctrl[e]||-1===this.ctrl[e])&&this.$set(this.ctrl,e,1);else if(this.$set(this.ctrl,e,i.detail.width),this.opts[4]){var o=this.opts[6]+"."+e+".attrs.";i.detail.width<150&&this.root._setData(o+"ignore","T"),this.root._setData(o+"width",i.detail.width.toString())}},linkTap:function(i){var s=this;if(this.opts[4]){var o=i.currentTarget.dataset.i,r=this.childs[o],n=this.root._getItem(r);this.root._tooltip({top:e(i),items:n,success:function(i){"更换链接"===n[i]?s.root.getSrc("link",r.attrs.href).then((function(i){s.root._editVal(s.opts[6]+"."+o+".attrs.href",r.attrs.href,i,!0),t.showToast({title:"成功"})})).catch((function(){})):s.remove(o)}})}else{var a=i.currentTarget?this.childs[i.currentTarget.dataset.i]:{},c=a.attrs||i,h=c.href;this.root.$emit("linktap",Object.assign({innerText:this.root.getText(a.children||[])},c)),h&&("#"===h[0]?this.root.navigateTo(h.substring(1)).catch((function(){})):h.includes("://")?this.root.copyLink&&t.setClipboardData({data:h,success:function(){return t.showToast({title:"链接已复制"})}}):t.navigateTo({url:h,fail:function(){t.switchTab({url:h,fail:function(){}})}}))}},mediaError:function(t){var i=t.currentTarget.dataset.i,s=this.childs[i];if("video"===s.name||"audio"===s.name){var e=(this.ctrl[i]||0)+1;if(e>s.src.length&&(e=0),e<s.src.length)return void this.$set(this.ctrl,i,e)}else"img"===s.name&&this.opts[2]&&this.$set(this.ctrl,i,-1);this.root&&this.root.$emit("error",{source:s.name,attrs:s.attrs,errMsg:t.detail.errMsg})}}};i.default=r}).call(this,s("543d")["default"])},e2c6:function(t,i,s){"use strict";s.r(i);var e=s("b337"),o=s("e94b");for(var r in o)"default"!==r&&function(t){s.d(i,t,(function(){return o[t]}))}(r);s("e495");var n,a=s("f0c5"),c=s("bb78"),h=Object(a["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],n);"function"===typeof c["a"]&&Object(c["a"])(h),i["default"]=h.exports},e495:function(t,i,s){"use strict";var e=s("23bc"),o=s.n(e);o.a},e94b:function(t,i,s){"use strict";s.r(i);var e=s("c098"),o=s.n(e);for(var r in e)"default"!==r&&function(t){s.d(i,t,(function(){return e[t]}))}(r);i["default"]=o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/mp-html/node/node-create-component',
    {
        'components/mp-html/node/node-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("e2c6"))
        })
    },
    [['components/mp-html/node/node-create-component']]
]);
