(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/comment/comment"],{"36fd":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return r}));var r={cSticky:function(){return t.e("components/c-sticky/c-sticky").then(t.bind(null,"4a0a"))},cStatusBar:function(){return t.e("components/c-status-bar/c-status-bar").then(t.bind(null,"0aad"))},cPageHeader:function(){return t.e("components/c-page-header/c-page-header").then(t.bind(null,"037b"))},cComment:function(){return t.e("components/c-comment/c-comment").then(t.bind(null,"fa9c"))},unicloudDb:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/@dcloudio/uni-cli-shared/components/unicloud-db")]).then(t.bind(null,"960d"))},cDesc:function(){return t.e("components/c-desc/c-desc").then(t.bind(null,"b9b7"))},cScrollLoadMore:function(){return t.e("components/c-scroll-load-more/c-scroll-load-more").then(t.bind(null,"4b83"))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,"5a54"))},cBackTop:function(){return t.e("components/c-back-top/c-back-top").then(t.bind(null,"048f"))}},o=function(){var e=this,n=e.$createElement,t=(e._self._c,e.$hasScopedSlotsParams("1a371400-5")),r=t?e.$getScopedSlotsParams("1a371400-5","default","error"):null,o=t&&r?e.$getScopedSlotsParams("1a371400-5","default","error"):null,a=t&&!r?e.$getScopedSlotsParams("1a371400-5","default","data"):null,c=t&&!r?e.$getScopedSlotsParams("1a371400-5","default","hasMore"):null,u=t&&!r?e.$getScopedSlotsParams("1a371400-5","default","loading"):null;e.$mp.data=Object.assign({},{$root:{m0:t,m1:r,m2:o,l0:a,m3:c,m4:u}})},a=[]},"60c5":function(e,n,t){"use strict";t.r(n);var r=t("36fd"),o=t("c0bc");for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("9f7b");var c,u=t("f0c5"),i=Object(u["a"])(o["default"],r["b"],r["c"],!1,null,"138b91cb",null,!1,r["a"],c);n["default"]=i.exports},7396:function(e,n,t){"use strict";(function(e,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(t("a34a")),a=c(t("770b"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){l(a,r,o,c,u,"next",e)}function u(e){l(a,r,o,c,u,"throw",e)}c(void 0)}))}}var m={mixins:[a.default],data:function(){var n=e.getCurrentUserInfo(),t=n.uid,r="arrayElemAt(user_id.username, 0) as username,arrayElemAt(user_id.avatar, 0) as avatarUrl,arrayElemAt(user_id._id, 0) as comment_user_id,comment_content,comment_date,size(praise_user_ids._id) as praiseNum,in('".concat(t,"',praise_user_ids._id) as praiseStatus,arrayElemAt(reply_user_id.username, 0) as reply_username");return{commentsField:r,uid:t,mainComment:{},replyUser:{},replyText:""}},onReachBottom:function(){this.$refs.comment.loadMore()},onPullDownRefresh:function(){this.$refs.comment.loadData({clear:!0},r.stopPullDownRefresh)},onLoad:function(){this.mainComment=r.getStorageSync("mainComment"),this.replyUser=this.mainComment},computed:{replyUserName:function(){var e=this.replyUser;return"回复: ".concat(e.username)}},methods:{replyComfirm:function(){var e=this,n=Boolean(this.replyText.length);n&&r.showModal({content:"发布评论",confirmText:"确认",cancelText:"取消",success:function(){var n=d(o.default.mark((function n(t){var r,a,c,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.confirm,!r){n.next=17;break}return e.$U.loading(),n.prev=3,a=e.replyUser,c=a.postID,u=a.comment_user_id,a._id,n.next=7,e.$A.comment.createComment({post_id:c,comment_content:e.replyText,reply_user_id:u,reply_comment_id:e.mainComment._id});case 7:e.$U.notice("发布成功"),e.clear(),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),e.$U.notice(n.t0.message);case 14:return n.prev=14,e.$U.hideLoading(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[3,11,14,17]])})));function t(e){return n.apply(this,arguments)}return t}()})},resolveCommentAction:function(e){this.replyUser=e},activeColor:function(e){return e&&"main-color"},clear:function(){this.replyText="",r.hideKeyboard()},resolveCommentPraise:function(e){var n=this;return d(o.default.mark((function t(){var r,a,c,u,s;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.fail,a=e.success,c=e.complete,u=e.payload,s=n.uid,t.prev=2,t.next=5,n.$A.comment.praise(i({uid:s},u));case 5:a(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),r(t.t0.message);case 11:return t.prev=11,c(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})))()}}};n.default=m}).call(this,t("a9ff")["default"],t("543d")["default"])},7887:function(e,n,t){},"918e":function(e,n,t){"use strict";(function(e){t("d48a");r(t("66fd"));var n=r(t("60c5"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},"9f7b":function(e,n,t){"use strict";var r=t("7887"),o=t.n(r);o.a},c0bc:function(e,n,t){"use strict";t.r(n);var r=t("7396"),o=t.n(r);for(var a in r)"default"!==a&&function(e){t.d(n,e,(function(){return r[e]}))}(a);n["default"]=o.a}},[["918e","common/runtime","common/vendor"]]]);