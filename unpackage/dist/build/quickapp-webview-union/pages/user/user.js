(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{1862:function(e,t,n){"use strict";var r=n("8c2b"),a=n.n(r);a.a},4340:function(e,t,n){"use strict";n.r(t);var r=n("43b0"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},"43b0":function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("a34a"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,a,o,u){try{var c=e[o](u),s=c.value}catch(i){return void n(i)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){u(o,r,a,c,s,"next",e)}function s(e){u(o,r,a,c,s,"throw",e)}c(void 0)}))}}var s=function(){n.e("pages/user/follow").then(function(){return resolve(n("fd3c"))}.bind(null,n)).catch(n.oe)},i={components:{cFollow:s},data:function(){var t=e.getCurrentUserInfo(),n=t.uid,r="create_date,arrayElemAt(author.username, 0) as username,arrayElemAt(author._id, 0) as authorID,arrayElemAt(author.avatar, 0) as avatarUrl,title,topic_ids.title as topics,size(praise_user_ids._id) as praiseNum,in('".concat(n,"', praise_user_ids._id) as praiseStatus,size(love_user_ids._id) as loveNum,in('").concat(n,"', love_user_ids._id) as loveStatus, arrayElemAt(imgs.url, 0) as cover");return{post:{},uid:n,postNum:0,followNum:0,fansNum:0,field:r}},onLoad:function(){var e=this;r.$emit("userDetail",(function(t){return e.post=t})),this.count()},onPullDownRefresh:function(){var e=this;return c(a.default.mark((function t(){var n,o;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Promise((function(t){e.$refs.posts.loadData({clear:!0},t)})),o=Promise.all([n,e.count()]),t.next=4,o;case 4:r.stopPullDownRefresh();case 5:case"end":return t.stop()}}),t)})))()},methods:{count:function(){var e=this;return c(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.countPost();case 2:return t.next=4,e.countFollow();case 4:return t.next=6,e.countFans();case 6:case"end":return t.stop()}}),t)})))()},resolveFollow:function(e){var t=this;return c(a.default.mark((function n(){var r,o,u,c,s,i,l;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.id,o=e.fail,u=e.success,c=e.complete,s=t.$A.follow,i=s.create,l=s.destory,n.prev=2,!r){n.next=8;break}return n.next=6,l({id:r});case 6:n.next=10;break;case 8:return n.next=10,i({follow_user_id:t.post.authorID});case 10:u(),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](2),o(n.t0.message);case 16:return n.prev=16,t.$refs.follows.loadData({clear:!0},c),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[2,13,16,19]])})))()},countPost:function(){var e=this;return c(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$A.post.countPost({author:e.post.authorID});case 3:e.postNum=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},countFollow:function(){var e=this;return c(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$A.follow.countFollow({author:e.post.authorID});case 3:e.followNum=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},countFans:function(){var e=this;return c(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$A.follow.countFans({author:e.post.authorID});case 3:e.fansNum=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},toPostPage:function(e){r.$once("getPost",(function(t){return t(e)})),r.navigateTo({url:"/pages/post/post"})}}};t.default=i}).call(this,n("a9ff")["default"],n("8adf")["default"])},"7b3d":function(e,t,n){"use strict";n.r(t);var r=n("a7ef"),a=n("4340");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("1862");var u,c=n("f0c5"),s=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"e2cccd26",null,!1,r["a"],u);t["default"]=s.exports},"8c2b":function(e,t,n){},a7ef:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={cSticky:function(){return n.e("components/c-sticky/c-sticky").then(n.bind(null,"4a0a"))},cStatusBar:function(){return n.e("components/c-status-bar/c-status-bar").then(n.bind(null,"0aad"))},cPageHeader:function(){return n.e("components/c-page-header/c-page-header").then(n.bind(null,"037b"))},cImage:function(){return n.e("components/c-image/c-image").then(n.bind(null,"03db"))},unicloudDb:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/@dcloudio/uni-cli-shared/components/unicloud-db")]).then(n.bind(null,"960d"))},cErrorTip:function(){return Promise.all([n.e("common/vendor"),n.e("components/c-error-tip/c-error-tip")]).then(n.bind(null,"fb9e"))}},a=function(){var e=this,t=e.$createElement;e._self._c},o=[]},ab6b:function(e,t,n){"use strict";(function(e,t){n("d48a");a(n("66fd"));var r=a(n("7b3d"));function a(e){return e&&e.__esModule?e:{default:e}}e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("8adf")["default"],n("8adf")["createPage"])}},[["ab6b","common/runtime","common/vendor"]]]);