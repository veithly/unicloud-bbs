(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-user"],{"037b":function(t,e,n){"use strict";n.r(e);var a=n("4b67"),r=n("4aae");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("a1e2");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"45fa1794",null,!1,a["a"],o);e["default"]=s.exports},1058:function(t,e,n){"use strict";(function(t,a){var r=n("4ea4");n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var u=r(n("1da1")),o=r(n("fd3c")),i={components:{cFollow:o.default},data:function(){var e=t.getCurrentUserInfo(),n=e.uid,a="create_date,arrayElemAt(author.username, 0) as username,arrayElemAt(author._id, 0) as authorID,arrayElemAt(author.avatar, 0) as avatarUrl,title,topic_ids.title as topics,size(praise_user_ids._id) as praiseNum,in('".concat(n,"', praise_user_ids._id) as praiseStatus,size(love_user_ids._id) as loveNum,in('").concat(n,"', love_user_ids._id) as loveStatus, arrayElemAt(imgs.url, 0) as cover");return{post:{},uid:n,postNum:0,followNum:0,fansNum:0,field:a}},onLoad:function(){var t=this;uni.$emit("userDetail",(function(e){return t.post=e})),this.count()},onPullDownRefresh:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Promise((function(e){t.$refs.posts.loadData({clear:!0},e)})),a=Promise.all([n,t.count()]),e.next=4,a;case 4:uni.stopPullDownRefresh();case 5:case"end":return e.stop()}}),e)})))()},methods:{count:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.countPost();case 2:return e.next=4,t.countFollow();case 4:return e.next=6,t.countFans();case 6:case"end":return e.stop()}}),e)})))()},resolveFollow:function(t){var e=this;return(0,u.default)(regeneratorRuntime.mark((function n(){var a,r,u,o,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.id,r=t.fail,u=t.success,o=t.complete,i=e.$A.follow,s=i.create,c=i.destory,n.prev=2,!a){n.next=8;break}return n.next=6,c({id:a});case 6:n.next=10;break;case 8:return n.next=10,s({follow_user_id:e.post.authorID});case 10:u(),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](2),r(n.t0.message);case 16:return n.prev=16,e.$refs.follows.loadData({clear:!0},o),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[2,13,16,19]])})))()},countPost:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$A.post.countPost({author:t.post.authorID});case 3:t.postNum=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),a("log",e.t0.message," at pages/user/user.vue:112");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},countFollow:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$A.follow.countFollow({author:t.post.authorID});case 3:t.followNum=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),a("log",e.t0.message," at pages/user/user.vue:121");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},countFans:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$A.follow.countFans({author:t.post.authorID});case 3:t.fansNum=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),a("log",e.t0.message," at pages/user/user.vue:130");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},toPostPage:function(t){uni.$once("getPost",(function(e){return e(t)})),uni.navigateTo({url:"/pages/post/post"})}}};e.default=i}).call(this,n("a9ff")["default"],n("0de9")["log"])},"15bb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{msg:{type:String,default:""}}};e.default=a},"1ba9":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"main",style:{top:t.top,backgroundColor:t.backgroundColor}},[t._t("default")],2)},u=[]},"21f2":function(t,e,n){"use strict";n.r(e);var a=n("30a8"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},"2a8c":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={cSticky:n("4a0a").default,cStatusBar:n("0aad").default,cPageHeader:n("037b").default,cImage:n("03db").default,unicloudDb:n("960d").default,cErrorTip:n("fb9e").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("c-sticky",[n("c-status-bar"),n("c-page-header")],1),n("v-uni-view",{staticClass:"m-4 flex"},[n("c-image",{staticClass:"avatar mr-5",attrs:{src:t.post.avatarUrl,mode:"aspectFill"}}),n("v-uni-view",{staticClass:"p-1 user-container"},[n("v-uni-text",{staticClass:"h2"},[t._v(t._s(t.post.username))]),n("unicloud-db",{ref:"follows",attrs:{collection:"follows",where:"user_id == '"+t.uid+"' && follow_user_id == '"+t.post.authorID+"'"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data,r=e.error;return[r?n("v-uni-view",[t._v(t._s(r.message))]):n("v-uni-view",[n("c-follow",{attrs:{f_id:a[0]&&a[0]._id},on:{follow:function(e){arguments[0]=e=t.$handleEvent(e),t.resolveFollow.apply(void 0,arguments)}}})],1)]}}])})],1)],1),n("v-uni-view",{staticClass:"flex",staticStyle:{"justify-content":"space-around"}},[n("v-uni-view",{staticClass:"flex flex-column align-center"},[n("v-uni-text",{staticClass:"h3"},[t._v(t._s(t.postNum))]),n("v-uni-text",[t._v("帖子")])],1),n("v-uni-view",{staticClass:"flex flex-column align-center"},[n("v-uni-text",{staticClass:"h3"},[t._v(t._s(t.followNum))]),n("v-uni-text",[t._v("关注")])],1),n("v-uni-view",{staticClass:"flex flex-column align-center"},[n("v-uni-text",{staticClass:"h3"},[t._v(t._s(t.fansNum))]),n("v-uni-text",[t._v("粉丝")])],1)],1),n("v-uni-view",{staticClass:"mt-4"},[n("v-uni-text",{staticClass:"h3 ml-2"},[t._v("近期")]),n("unicloud-db",{ref:"posts",attrs:{where:"author._id=='"+t.post.authorID+"'",collection:"posts,uni-id-users,topics",field:t.field,orderby:"create_date desc","page-size":4},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data,r=(e.loading,e.error);e.hasMore;return[r?n("c-error-tip",{attrs:{msg:r.message}}):n("v-uni-view",{staticClass:"flex flex-wrap p-2"},t._l(a,(function(e){return n("c-image",{key:e._id,staticClass:"cover m-2 rounded",attrs:{src:e.cover,mode:"aspectFill"},on:{"on-tap":function(n){arguments[0]=n=t.$handleEvent(n),t.toPostPage(e)}}})})),1)]}}])})],1)],1)},u=[]},"30a8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{disabled:{type:Boolean,default:!1}}};e.default=a},"3a14":function(t,e,n){t.exports=n.p+"static/img/empty.e7d3375f.png"},4340:function(t,e,n){"use strict";n.r(e);var a=n("1058"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},"48f8":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=a(n("1da1")),u={props:{f_id:{type:String,default:""}},data:function(){return{loading:!1}},methods:{resolveFollow:function(t){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading||(e.loading=!0,n=function(t){return e.$U.notice(t)},a=function(){e.f_id?e.$U.notice("取关成功"):e.$U.notice("关注成功")},r=function(){e.$U.hideLoading(),e.loading=!1},e.$emit("follow",{id:e.f_id,fail:n,success:a,complete:r}));case 1:case"end":return t.stop()}}),t)})))()}}};e.default=u},"4a0a":function(t,e,n){"use strict";n.r(e);var a=n("1ba9"),r=n("4a6d");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("adeb");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"5151b3c6",null,!1,a["a"],o);e["default"]=s.exports},"4a6d":function(t,e,n){"use strict";n.r(e);var a=n("6592"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},"4aae":function(t,e,n){"use strict";n.r(e);var a=n("b924"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},"4b67":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-header px-2 flex align-center justify-between"},[t.canBack?n("v-uni-view",{staticClass:"iconfont icon-arrowLeft-fill back-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}):t._e(),n("v-uni-view",{staticClass:"font-lg"},[t._v(t._s(t.title))]),t._t("default")],2)},u=[]},"606a":function(t,e,n){var a=n("f3f0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("48921dd0",a,!0,{sourceMap:!1,shadowMode:!1})},6592:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{top:{type:[String,Number],default:0},backgroundColor:{type:String,default:"white"}}};e.default=a},"6aca":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".avatar[data-v-05c6f4de]{width:%?250?%;height:%?250?%;border-radius:100%}.user-container[data-v-05c6f4de]{width:%?300?%;height:%?300?%}.cover[data-v-05c6f4de]{width:%?315?%;height:%?350?%}",""]),t.exports=e},"7ab8":function(t,e,n){"use strict";var a=n("606a"),r=n.n(a);r.a},"7b3d":function(t,e,n){"use strict";n.r(e);var a=n("2a8c"),r=n("4340");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("ef53");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"05c6f4de",null,!1,a["a"],o);e["default"]=s.exports},"8fac":function(t,e,n){"use strict";n.r(e);var a=n("d976"),r=n("21f2");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"e95d39d4",null,!1,a["a"],o);e["default"]=s.exports},9406:function(t,e,n){var a=n("e8ca");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("3d962d2a",a,!0,{sourceMap:!1,shadowMode:!1})},9628:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={cButton:n("8fac").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("c-button",{staticClass:"px-3 bg-white",class:t.f_id?"main-bg-color text-white font-sm":"bg-white",on:{"on-tap":function(e){arguments[0]=e=t.$handleEvent(e),t.resolveFollow.apply(void 0,arguments)}}},[t._v(t._s(t.loading?"loading":t.f_id?"已关注":"关注"))])},u=[]},a1b9:function(t,e,n){"use strict";n.r(e);var a=n("15bb"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},a1e2:function(t,e,n){"use strict";var a=n("e61b"),r=n.n(a);r.a},adeb:function(t,e,n){"use strict";var a=n("9406"),r=n.n(a);r.a},b924:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{title:{type:String,default:""},canBack:{type:Boolean,default:!0}},methods:{back:function(){uni.navigateBack({delta:1})}}};e.default=a},cbb1:function(t,e,n){"use strict";n.r(e);var a=n("48f8"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},d976:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-button",{staticClass:"vivify duration-150",attrs:{"hover-stay-time":"250","hover-class":"pulsate",disabled:t.disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("on-tap")}}},[t._t("default")],2)},u=[]},e525:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".page-header[data-v-45fa1794]{height:%?100?%}.back-icon[data-v-45fa1794]{font-size:%?50?%}",""]),t.exports=e},e61b:function(t,e,n){var a=n("e525");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("b7efe37c",a,!0,{sourceMap:!1,shadowMode:!1})},e8ca:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".main[data-v-5151b3c6]{position:-webkit-sticky;position:sticky;z-index:98}",""]),t.exports=e},eb92:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={cImage:n("03db").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"flex flex-column align-center"},[a("c-image",{staticClass:"cover",attrs:{src:n("3a14"),mode:"aspectFill"}}),a("v-uni-text",{staticClass:"main-color p-2 careful-bg-color"},[t._v(t._s(t.msg))])],1)},u=[]},ef53:function(t,e,n){"use strict";var a=n("fe42"),r=n.n(a);r.a},f3f0:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".cover[data-v-2638a35b]{width:%?600?%;height:%?400?%}",""]),t.exports=e},fb9e:function(t,e,n){"use strict";n.r(e);var a=n("eb92"),r=n("a1b9");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("7ab8");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"2638a35b",null,!1,a["a"],o);e["default"]=s.exports},fd3c:function(t,e,n){"use strict";n.r(e);var a=n("9628"),r=n("cbb1");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"f964a892",null,!1,a["a"],o);e["default"]=s.exports},fe42:function(t,e,n){var a=n("6aca");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("cc8c51dc",a,!0,{sourceMap:!1,shadowMode:!1})}}]);