(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tabbar-home-home"],{"059e":function(e,t,a){var n=a("d60c");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("19b59934",n,!0,{sourceMap:!1,shadowMode:!1})},"25f3":function(e,t,a){"use strict";a.r(t);var n=a("eb12"),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},"2f98":function(e,t,a){var n=a("5660");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("64d96f6d",n,!0,{sourceMap:!1,shadowMode:!1})},5660:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".main[data-v-eb2b99f6]{height:%?330?%}.cover[data-v-eb2b99f6]{width:%?670?%;height:%?250?%}.title[data-v-eb2b99f6]{top:0;right:%?20?%}",""]),e.exports=t},b00b:function(e,t,a){"use strict";a.r(t);var n=a("c1c0"),r=a("25f3");for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("b4c9");var i,u=a("f0c5"),s=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,"7955a758",null,!1,n["a"],i);t["default"]=s.exports},b4c9:function(e,t,a){"use strict";var n=a("059e"),r=a.n(n);r.a},b6a8:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={cImage:a("03db").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"main"},[a("v-uni-swiper",{attrs:{"indicator-dots":!0,autoplay:!0,circular:!0}},e._l(e.values,(function(t){return a("v-uni-swiper-item",{key:t._id},[a("v-uni-view",{staticClass:"m-4 position-relative"},[a("c-image",{staticClass:"cover rounded",attrs:{src:t.url}}),a("v-uni-text",{staticClass:"position-absolute text-white title"},[e._v(e._s(t.title))])],1)],1)})),1)],1)},o=[]},c1c0:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={cSticky:a("4a0a").default,cStatusBar:a("0aad").default,cPageHeader:a("037b").default,unicloudDb:a("960d").default,cErrorTip:a("fb9e").default,cBanner:a("e6ee").default,cDesc:a("b9b7").default,cPosts:a("a11b").default,cScrollLoadMore:a("4b83").default,cBackTop:a("048f").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("c-sticky",[a("c-status-bar"),a("c-page-header",{attrs:{title:"首页","can-back":!1}},[a("v-uni-view",[a("v-uni-text",{staticClass:"mr-5 iconfont icon-sousuo page-header-icon",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSearchPage.apply(void 0,arguments)}}}),a("v-uni-text",{staticClass:"iconfont icon-bianji page-header-icon",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toEditorPage.apply(void 0,arguments)}}})],1)],1)],1),a("unicloud-db",{ref:"topics",attrs:{collection:"topics","page-size":4,field:"title,cover.url as url,create_date",orderby:"create_date desc"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.data,n=e.error;return[n?a("c-error-tip",{attrs:{msg:n.message}}):a("v-uni-view",[a("c-banner",{attrs:{values:t}})],1)]}}])}),a("c-desc",{attrs:{title:"实时"}}),a("unicloud-db",{ref:"posts",attrs:{collection:"posts,uni-id-users,topics",field:"create_date,arrayElemAt(author.username, 0) as username,arrayElemAt(author._id, 0) as authorID,arrayElemAt(author.avatar, 0) as avatarUrl,title,imgs,topic_ids.title as topics,size(praise_user_ids._id) as praiseNum,in('"+e.uid+"', praise_user_ids._id) as praiseStatus,size(love_user_ids._id) as loveNum,in('"+e.uid+"', love_user_ids._id) as loveStatus",orderby:"create_date desc"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data,r=t.loading,o=t.error,i=t.hasMore;return[o?a("c-error-tip",{attrs:{msg:o.message}}):a("v-uni-view",[a("c-posts",{attrs:{values:n},on:{praise:function(t){arguments[0]=t=e.$handleEvent(t),e.praise.apply(void 0,arguments)},love:function(t){arguments[0]=t=e.$handleEvent(t),e.love.apply(void 0,arguments)},toPost:function(t){arguments[0]=t=e.$handleEvent(t),e.toPostPage.apply(void 0,arguments)},countComment:function(t){arguments[0]=t=e.$handleEvent(t),e.countComment.apply(void 0,arguments)},toUser:function(t){arguments[0]=t=e.$handleEvent(t),e.toUserPage.apply(void 0,arguments)}}}),a("c-scroll-load-more",{attrs:{loading:r,hasMore:i}})],1)]}}])}),a("c-back-top",{attrs:{bottom:"calc(50px + 50rpx)"}})],1)},o=[]},cd7f:function(e,t,a){"use strict";a.r(t);var n=a("eefb"),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},d5a3:function(e,t,a){"use strict";var n=a("2f98"),r=a.n(n);r.a},d60c:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".page-header-icon[data-v-7955a758]{font-size:%?45?%}",""]),e.exports=t},e6ee:function(e,t,a){"use strict";a.r(t);var n=a("b6a8"),r=a("cd7f");for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("d5a3");var i,u=a("f0c5"),s=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,"eb2b99f6",null,!1,n["a"],i);t["default"]=s.exports},eb12:function(e,t,a){"use strict";(function(e){var n=a("4ea4");a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),o=n(a("770b")),i={mixins:[o.default],data:function(){var t=e.getCurrentUserInfo(),a=t.uid;return{uid:a}},onPullDownRefresh:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){e.loadData&&e.loadData({clear:!0},t)}))},t.next=3,Promise.all([a(e.$refs.topics),a(e.$refs.posts)]);case 3:uni.$emit("countComment"),uni.stopPullDownRefresh();case 5:case"end":return t.stop()}}),t)})))()},destroyed:function(){uni.$off("getPost"),uni.$off("countComment")},onReachBottom:function(){this.$refs.posts.loadMore()},methods:{toUserPage:function(e){uni.$once("userDetail",(function(t){return t(e)})),uni.navigateTo({url:"/pages/user/user"})},toPostPage:function(e){uni.$once("getPost",(function(t){return t(e)})),uni.navigateTo({url:"/pages/post/post"})},countComment:function(e,t){var a=this,n=function(){var n=(0,r.default)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$A.comment.countTotalComment({_id:t});case 2:r=n.sent,e(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();uni.$on("countComment",n),n()},toSearchPage:function(){uni.navigateTo({url:"/pages/search/search"})},toEditorPage:function(){uni.navigateTo({url:"/pages/editor/editor"})},praise:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n,r,o,i,u,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.postID,r=e.praiseStatus,o=e.fail,i=e.success,u=e.complete,a.prev=1,s=t.$A.post.praise({uid:t.uid,postID:n,praiseStatus:r}),a.next=5,t.$U.delayRequest(s);case 5:i(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),o(a.t0.message);case 11:return a.prev=11,u(),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,8,11,14]])})))()},love:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n,r,o,i,u,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.postID,r=e.loveStatus,o=e.fail,i=e.success,u=e.complete,a.prev=1,a.next=4,t.$A.post.love({uid:t.uid,postID:n,loveStatus:r});case 4:return s=a.sent,a.next=7,t.$U.delayRequest(s);case 7:i(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),o(a.t0.message);case 13:return a.prev=13,u(),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[1,10,13,16]])})))()}}};t.default=i}).call(this,a("a9ff")["default"])},eefb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{values:{type:Array,default:function(){return[]}}}};t.default=n}}]);