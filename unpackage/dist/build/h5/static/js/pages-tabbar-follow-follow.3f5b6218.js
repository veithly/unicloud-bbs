(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tabbar-follow-follow"],{"050d":function(e,t,n){"use strict";n.r(t);var r=n("92ab"),o=n("9798");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var s,i=n("f0c5"),u=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"690ab064",null,!1,r["a"],s);t["default"]=u.exports},"075a":function(e,t,n){"use strict";n.r(t);var r=n("62dc"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},4586:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={cSticky:n("4a0a").default,cStatusBar:n("0aad").default,cPageHeader:n("037b").default,unicloudDb:n("960d").default,cErrorTip:n("fb9e").default,cImage:n("03db").default,cDivider:n("53ad").default,cScroll:n("bc75").default,cPosts:n("a11b").default},o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("c-sticky",[r("c-status-bar"),r("c-page-header",{attrs:{title:"关注",canBack:!1}})],1),r("unicloud-db",{ref:"followUsers",attrs:{collection:"follows,uni-id-users",field:e.followUserFiled,where:"user_id=='"+e.uid+"'",orderby:"follow_date desc"},on:{load:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFollowUserLoad.apply(void 0,arguments)}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.data,a=t.loading,s=t.error;t.hasMore;return[s?r("c-error-tip",{attrs:{msg:s.message}}):r("v-uni-view",[r("v-uni-scroll-view",{staticClass:"scroll-row followUserRow",attrs:{"scroll-into-view":"f"+e.swiperIndex,"scroll-x":!0,"scroll-with-animation":!0}},[e._l(o,(function(t,n){return r("v-uni-view",{key:t._id,staticClass:"scroll-row-item p-1 mx-3 position-relative transition-all",attrs:{id:"f"+n,select:n===e.swiperIndex},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFollowUserClick(n)}}},[r("c-image",{staticClass:"avatar rounded",attrs:{src:t.avatar}}),r("v-uni-text",{staticClass:"position-absolute username main-color careful-bg-color px-1 font-sm rounded"},[e._v(e._s(t.username))])],1)})),0!==o.length||a?e._e():r("v-uni-view",{staticClass:"scroll-row-item p-1 mx-3 position-relative"},[r("c-image",{staticClass:"avatar rounded",attrs:{src:n("c753")}}),r("v-uni-text",{staticClass:"position-absolute username main-color careful-bg-color px-1 font-sm rounded"},[e._v("未关注任何人")])],1)],2),r("c-divider")],1)]}}])}),r("v-uni-swiper",{style:{height:e.swiperHeight},attrs:{current:e.swiperIndex},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSwiperChange.apply(void 0,arguments)}}},e._l(e.users,(function(t){return r("v-uni-swiper-item",{key:t._id},[r("unicloud-db",{ref:"posts",refInFor:!0,attrs:{collection:"posts,uni-id-users,topics",field:e.postField,orderby:"create_date desc",where:"author._id=='"+t.uid+"'"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data,o=t.loading,a=t.error,s=t.hasMore;return[a?r("c-error-tip",{attrs:{msg:a.message}}):r("v-uni-view",[r("c-scroll",{attrs:{height:e.swiperHeight,loading:o,hasMore:s},on:{dropDown:function(t){arguments[0]=t=e.$handleEvent(t),e.dropDown.apply(void 0,arguments)},pullUp:function(t){arguments[0]=t=e.$handleEvent(t),e.pullUp.apply(void 0,arguments)}}},[r("c-posts",{attrs:{values:n},on:{praise:function(t){arguments[0]=t=e.$handleEvent(t),e.praise.apply(void 0,arguments)},love:function(t){arguments[0]=t=e.$handleEvent(t),e.love.apply(void 0,arguments)},toPost:function(t){arguments[0]=t=e.$handleEvent(t),e.toPostPage.apply(void 0,arguments)},countComment:function(t){arguments[0]=t=e.$handleEvent(t),e.countComment.apply(void 0,arguments)},toUser:function(t){arguments[0]=t=e.$handleEvent(t),e.toUserPage.apply(void 0,arguments)}}})],1)],1)]}}],null,!0)})],1)})),1)],1)},a=[]},"48c4e":function(e,t,n){"use strict";var r=function(e){(e.options.wxs||(e.options.wxs={}))["wxs"]=function(e){const t={startY:0,tip:"下拉刷新",pending:!1,allow:!0,lock:!1,safetyThreshold:60,threshold:120,startPoint:{x:0,y:0},minAngle:45},n=(e,t)=>{p()&&i(e,t)},r=(e,t)=>{p()&&u(e,t)},o=(e,t)=>{p()&&c(e,t)},a=(e,t)=>{p()&&l(e,t)},s=(e,n,r)=>{t.tip=e.tip,t.allow=e.allow,t.pending=e.pending,t.pending||(x(r,0,!0),m())},i=(e,n)=>{t.startPoint=f(e),y(h(e))},u=(e,n)=>{const r=h(e),o=Math.ceil(r-t.startY),a=f(e);if(!(d(t.startPoint,a)<t.minAngle)){if(x(n,o,!1),o>=t.threshold)return v(),void g(n,"释放更新");o>=t.safetyThreshold&&g(n,"下拉刷新")}},c=(e,n)=>{t.lock?(x(n,t.safetyThreshold,!0),g(n,"加载中..."),w(n,!0)):b(n)},l=(e,t)=>{b(t)},d=(e,t)=>{const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y),o=Math.sqrt(n*n+r*r);let a=0;return 0!==o&&(a=Math.asin(r/o)/Math.PI*180),a},f=e=>{if(!e)return{x:0,y:0};const t=e.touches&&e.touches[0],n=e.changedTouches&&e.changedTouches[0];return t?{x:t.pageX,y:t.pageY}:n?{x:n.pageX,y:n.pageY}:{x:e.clientX,y:e.clientY}},h=e=>{if(!e)return 0;const t=e.touches&&e.touches[0],n=e.changedTouches&&e.changedTouches[0];return t?t.pageY:n?n.pageY:e.clientY},p=()=>t.allow&&!t.pending,v=()=>t.lock=!0,m=()=>t.lock=!1,w=(e,t)=>{e.callMethod("setWxsPropPending",t)},g=(e,n)=>{n!==t.tip&&e.callMethod("setWxsPropTip",n)},y=e=>t.startY=e,x=(e,n,r)=>{e.requestAnimationFrame(()=>{e.selectComponent("#drop-down").setStyle({"will-change":"auto","min-height":n+"px",opacity:""+n/t.safetyThreshold,transition:`all ${r?.2:0}s ease-in-out`,color:"#ff584f",backgroundColor:"#ffebee"})})},b=e=>{g(e,"下拉加载"),x(e,0)};return e.exports={touchstart:n,touchmove:r,touchend:o,touchcancel:a,propsWatch:s},e.exports}({exports:{}})};t["a"]=r},"4bcd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{wxsProp:{pending:!1,allow:!0,tip:"下拉刷新",threshold:120}}},props:{loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},height:{type:String,default:"500px"}},computed:{loadMoreStatus:function(){var e=this.loading,t=this.hasMore;return e?"loading":t?"hasMore":"noMore"}},watch:{"wxsProp.pending":function(e){var t=this;e&&this.$emit("dropDown",(function(){t.wxsProp.pending=!1}))}},methods:{scroll:function(e){this.wxsProp.allow=this.getScrollTop(e)<this.wxsProp.threshold},scrolltolower:function(){this.$emit("pullUp")},getScrollTop:function(e){return e.detail.scrollTop},setWxsPropTip:function(e){this.wxsProp.tip=e},setWxsPropAllow:function(e){this.wxsProp.allow=e},setWxsPropPending:function(e){this.wxsProp.pending=e},click:function(e){this.$emit("click",e)}}};t.default=r},"4e24":function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e+="";while(e.length<t)e="0"+e;return e.slice(-t)}n("c975"),n("fb6a"),n("ac1f"),n("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=s,t.friendlyDate=i;var o={yyyy:function(e){return r(e.year,4)},yy:function(e){return r(e.year)},MM:function(e){return r(e.month)},M:function(e){return e.month},dd:function(e){return r(e.day)},d:function(e){return e.day},hh:function(e){return r(e.hour)},h:function(e){return e.hour},mm:function(e){return r(e.minute)},m:function(e){return e.minute},ss:function(e){return r(e.second)},s:function(e){return e.second},SSS:function(e){return r(e.millisecond,3)},S:function(e){return e.millisecond}};function a(e){if(e instanceof Date)return e;switch(typeof e){case"string":return e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/"));default:return new Date(e)}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!e&&0!==e)return"";e=a(e);var n={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},r=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,s=!0,i=t;while(s)s=!1,i=i.replace(r,(function(e){return s=!0,o[e](n)}));return i}function i(e,t){var n=t.locale,r=void 0===n?"zh":n,o=t.threshold,i=void 0===o?[6e4,36e5]:o,u=t.format,c=void 0===u?"yyyy/MM/dd hh:mm:ss":u;if("-"===e)return e;if(!e&&0!==e)return"";var l,d,f={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},h=f[r]||f.zh,p=a(e),v=p.getTime()-Date.now(),m=Math.abs(v);if(m<i[0])return v<0?h.justNow:h.soon;if(m>=i[1])return s(p,c);var w=h.later;v<0&&(w=h.ago,v=-v);var g=Math.floor(v/1e3),y=Math.floor(g/60),x=Math.floor(y/60),b=Math.floor(x/24),_=Math.floor(b/30),M=Math.floor(_/12);switch(!0){case M>0:l=M,d=h.year;break;case _>0:l=_,d=h.month;break;case b>0:l=b,d=h.day;break;case x>0:l=x,d=h.hour;break;case y>0:l=y,d=h.minute;break;default:l=g,d=h.second;break}return"en"===r&&(1===l?l="a":d+="s"),h.template.replace(/{\s*num\s*}/g,l+"").replace(/{\s*unit\s*}/g,d).replace(/{\s*suffix\s*}/g,w)}},"5a8d":function(e,t,n){"use strict";n.r(t);var r=n("4bcd"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},"62dc":function(e,t,n){"use strict";(function(e){var r=n("4ea4");n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var o=r(n("1da1")),a={data:function(){var t=this.$Q.useFk("author"),n=this.$Q(["create_date",t("username"),t("_id","authorID"),t("avatar","avatarUrl"),"title","imgs","topic_ids.title|topics","size(praise_user_ids._id)|praiseNum","in('".concat(o,"', praise_user_ids._id)|praiseStatus"),"size(love_user_ids._id)|loveNum","in('".concat(o,"', love_user_ids._id)|loveStatus")]),r=e.getCurrentUserInfo(),o=r.uid,a=this.$Q.useFk("follow_user_id"),s=this.$Q(["follow_date",a("_id","uid"),a("avatar"),a("username")]);return{uid:o,postField:n,swiperHeight:0,followUserFiled:s,users:[],swiperIndex:0}},onPullDownRefresh:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){e.loadData&&e.loadData({clear:!0},t)}))},t.next=3,Promise.all([n(e.$refs.topics),n(e.$refs.posts)]);case 3:uni.$emit("countComment"),uni.stopPullDownRefresh();case 5:case"end":return t.stop()}}),t)})))()},onReachBottom:function(){this.$refs.posts.loadMore()},onLoad:function(){this.handleRefreshFollowUsers(),this.calcSwiperHeight(),this.handleFollowUserLoad()},destroyed:function(){this.destroyRefreshFollowUsers(),this.destroyCountComment()},methods:{pullUp:function(){this.$refs.posts[this.swiperIndex].loadMore()},dropDown:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new Promise((function(e){t.$refs.posts[t.swiperIndex].loadData({clear:!0},e)})),n.next=3,r;case 3:uni.$emit("countComment"),e();case 5:case"end":return n.stop()}}),n)})))()},handleFollowUserLoad:function(e){this.users=e},handleFollowUserClick:function(e){this.swiperIndex=e},toUserPage:function(e){uni.setStorageSync("userDetail",e),uni.navigateTo({url:"/pages/user/user"})},calcSwiperHeight:function(){var e=uni.getSystemInfoSync(),t=e.screenHeight,n=e.statusBarHeight;this.swiperHeight=t-n-uni.upx2px(350)-50+"px"},handleSwiperChange:function(e){this.swiperIndex=e.detail.current},toPostPage:function(e){uni.setStorageSync("post",e),uni.navigateTo({url:"/pages/post/post"})},handleRefreshFollowUsers:function(){var e=this;uni.$on("refreshFollowUsers",(function(){e.$refs.followUsers.loadData({clear:!0})}))},destroyRefreshFollowUsers:function(){uni.$off("refreshFollowUsers")},destroyCountComment:function(){uni.$off("countComment")},countComment:function(e,t){var n=this,r=function(){var r=(0,o.default)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$A.comment.countTotalComment({_id:t});case 2:o=r.sent,e(o);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();uni.$on("countComment",r),r()},praise:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function n(){var r,o,a,s,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.postID,o=e.praiseStatus,a=e.fail,s=e.success,i=e.complete,n.prev=1,u=t.$A.post.praise({uid:t.uid,postID:r,praiseStatus:o}),n.next=5,t.$U.delayRequest(u);case 5:s(),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),a(n.t0.message);case 11:return n.prev=11,i(),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})))()},love:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function n(){var r,o,a,s,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.postID,o=e.loveStatus,a=e.fail,s=e.success,i=e.complete,n.prev=1,n.next=4,t.$A.post.love({uid:t.uid,postID:r,loveStatus:o});case 4:return u=n.sent,n.next=7,t.$U.delayRequest(u);case 7:s(),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),a(n.t0.message);case 13:return n.prev=13,i(),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})))()}}};t.default=a}).call(this,n("a9ff")["default"])},"6fad":function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,'.followUserRow[data-v-9175fa08]{height:%?200?%}.avatar[data-v-9175fa08]{width:%?250?%;height:%?160?%}.username[data-v-9175fa08]{top:%?10?%;right:%?15?%}[select="true"][data-v-9175fa08]{background-color:#e0e0e0}[select="false"][data-v-9175fa08]{background-color:none}',""]),e.exports=t},"92ab":function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-text",[e._v(e._s(e.dateShow))])},a=[]},9798:function(e,t,n){"use strict";n.r(t);var r=n("d81c"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},a29d:function(e,t,n){"use strict";var r=n("b97a"),o=n.n(r);o.a},b97a:function(e,t,n){var r=n("6fad");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("4f06").default;o("fda1854c",r,!0,{sourceMap:!1,shadowMode:!1})},bc75:function(e,t,n){"use strict";n.r(t);var r=n("f873"),o=n("5a8d");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var s,i=n("f0c5"),u=n("48c4e"),c=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);"function"===typeof u["a"]&&Object(u["a"])(c),t["default"]=c.exports},c5a9:function(e,t,n){"use strict";n.r(t);var r=n("4586"),o=n("075a");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("a29d");var s,i=n("f0c5"),u=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"9175fa08",null,!1,r["a"],s);t["default"]=u.exports},c753:function(e,t,n){e.exports=n.p+"static/img/empty.cf523ce9.png"},d81c:function(e,t,n){"use strict";n("a9e3"),n("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("4e24"),o={name:"uniDateformat",props:{date:{type:[Object,String,Number],default:function(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default:function(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:function(){return{refreshMark:0}},computed:{dateShow:function(){return this.refreshMark,(0,r.friendlyDate)(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler:function(){this.setAutoRefresh()},immediate:!0}},methods:{refresh:function(){this.refreshMark++},setAutoRefresh:function(){var e=this;clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((function(){e.refresh()}),parseInt(this.refreshRate)))}}};t.default=o},f873:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={uniLoadMore:n("e049").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-scroll-view",{style:{height:e.height},attrs:{"scroll-y":!0},on:{scroll:function(t){arguments[0]=t=e.$handleEvent(t),e.scroll.apply(void 0,arguments)},scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.scrolltolower.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.click.apply(void 0,arguments)}}},[n("v-uni-view",{wxsProps:{"change:prop":"wxsProp"},style:{minHeight:e.height},attrs:{"change:prop":e.wxs.propsWatch,prop:e.wxsProp},on:{touchstart:function(t){t=e.$handleWxsEvent(t),e.wxs.touchstart(t,e.$getComponentDescriptor())},touchmove:function(t){t=e.$handleWxsEvent(t),e.wxs.touchmove(t,e.$getComponentDescriptor())},touchend:function(t){t=e.$handleWxsEvent(t),e.wxs.touchend(t,e.$getComponentDescriptor())},touchcancel:function(t){t=e.$handleWxsEvent(t),e.wxs.touchcancel(t,e.$getComponentDescriptor())}}},[n("v-uni-view",{staticClass:"flex align-center justify-center",staticStyle:{opacity:"0"},attrs:{id:"drop-down"}},[n("v-uni-text",{staticClass:"position-absolute"},[e._v(e._s(e.wxsProp.tip))])],1),e._t("default"),"noMore"!==e.loadMoreStatus?n("uni-load-more",{attrs:{status:e.loadMoreStatus}}):n("v-uni-view",{staticClass:"text-center py-1"},[e._v("-- END --")])],2)],1)],1)},a=[]}}]);